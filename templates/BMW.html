<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="static/styles.css" media="screen"/>
    <title>BMW</title>
</head>
<body>
    <!-- This is the navbar at the top of the website -->
    <div class="topnav">
        <a href="/home">Home Page</a>
        <a href="/mini">Minis Page</a>
        <a class="active" href="/bmw">BMW Page</a>
    </div>
    <div class = "rest"> <!-- This is just to be able to style the page without the navbar -->
        <!-- This is where the rest of the page starts -->
        <h1>BMWs Page</h1>
        <h3>Press the buttons and choose a car on each button to compare them</h3>
        <div class="dropdown-group">
            <div class="dropdown">
                <button class="dropbtn">Compare BMW</button>
                <div class="dropdown-content">
                    <!-- when you click on a car, it will get the info for that car -->
                    {% for bmw in bmws %}
                    <a onclick="compareBmw({{ bmw.carID }}, 1)">{{ bmw.carType }}</a>
                    {% endfor %}
                </div>
            </div>
            <div class="dropdown">
                <button class="dropbtn">With BWM</button>
                <div class="dropdown-content">
                    <!-- when you click on a car, it will get the info for that car -->
                    {% for bmw in bmws %}
                    <a onclick="compareBmw({{ bmw.carID }}, 2)">{{ bmw.carType }}</a>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- Shows info about the mini they choose -->
        <div class="content">
            <div id="section-1"></div>
            <div id="section-2"></div>
        </div>
        <script>
            function compareBmw(id, section) {
                var section_div = document.querySelector(`#section-${section}`);
                var xhttp = new XMLHttpRequest(); // new xmlrequest object
                xhttp.onreadystatechange = function () { // function for when the url responds
                    if (this.readyState == 4 && this.status == 200) { // check if the response was successfull 
                        section_div.innerHTML = this.responseText;
                    }
                };
                xhttp.open("GET", `/bmw_api/${id}`, true);
                xhttp.send();
            }
        </script>
    </div>
</body>
</html>